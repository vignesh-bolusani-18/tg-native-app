{
  "common": {
      "module_name": "personalized_marketing",
      "base_path": "/Users/ankur/Documents/TrueGradient/local_data/data_bucket/next_best_offer/",
      "raw_data_id": "202205",
      "raw_data_path": "etl_data",
      "run_date": "202205",
      "job_id": "job_id",
      "snapshot_paths": [
          "202110",
          "202111"
      ]
  },
  "etl": {
      "loaded_datasets": [
          {
              "filename": "Online_Retail",
              "date_format": "%m/%d/%y %H:%M",
              "data_params": {
                  "timestamp_column": [],
                  "numeric": [],
                  "categorical": []
              },
              "data_steps": []
          },
          {
              "filename": "category",
              "date_format": "%m/%d/%y %H:%M",
              "data_params": {
                  "timestamp_column": [],
                  "numeric": [],
                  "categorical": []
              },
              "data_steps": []
          }
      ],
      "input_data": "Online_Retail",
      "join_operations": [
          {
              "file2": "category",
              "file1_col": [
                  "Category"
              ],
              "file2_col": [
                  "Category"
              ],
              "join_type": "left"
          }
      ],
      "problem_type": {
          "next_best_action": {
              "option": false,
              "segment_level": {
                  "segment": "Category_name"
              }
          },
          "next_best_offer": {
              "option": true,
              "segment_level": {
                  "segment": "Category_name"
              }
          }
      },
      "activity_period": 180,
      "pred_st_dt": "2021-12-01",
      "pred_end_dt": "2021-12-31",
      "transactional_cols": {
          "date_": "InvoiceDate",
          "value_cols": [
              "Quantity"
          ]
      },
      "num_history_days": 365,
      "daysince_features": [
          "CustomerID"
      ],
      "distribution_features": {
          "max_cardinality": 20,
          "feature_set": []
      },
      "base_features": {
          "features": [
              "Quantity"
          ],
          "time_cuts": [
              30,
              60
          ]
      },
      "id_profile_features": [
          "Country"
      ]
  },
  "data": {
      "target_column": [],
      "id_columns": [
          "CustomerID"
      ],
      "ts_id_columns": [
          "CustomerID"
      ],
      "timestamp_column": "InvoiceDate",
      "retrieval_columns": [],
      "regressor_columns": {
          "timestamp_column": [],
          "numeric": [],
          "categorical": [],
          "text": []
      },
      "fillna_method": {
          "value": {}
      }
  },
  "preprocess": {
      "data_prep_path": "data_prepared",
      "mutual_info": {
          "compute": false,
          "top_n_features": 20
      },
      "missing_val_threshold": 95,
      "serial_ops": [
          {
              "input": {
                  "name": "etl_data",
                  "file_read_kwargs": null
              },
              "output": "prepared_data",
              "operations": []
          }
      ],
      "dump_data": {
          "input_data": "prepared_data",
          "future_data": null
      }
  },
  "feature_engg": {
      "outlier_percentile": 0.99,
      "mutual_info": {
          "compute": false,
          "mutual_info_frac": 0.5,
          "use_top_n": true,
          "top_n_features": 5
      },
      "segmentation": {
          "compute": false,
          "use_mutual_info": false,
          "strategic": {
              "seg_var": [],
              "model": "chebyshev",
              "signicance_level": 60
          },
          "tactical": {
              "compute": false,
              "segments": [
                  "High",
                  "Medium",
                  "Low"
              ],
              "ae_params": {
                  "network_params": {
                      "epochs": 5
                  },
                  "dataloader_params": {
                      "batch_size": 128,
                      "num_workers": 6,
                      "shuffle": true
                  },
                  "optimizer_params": {
                      "lr": 0.001,
                      "alpha": 0.9,
                      "weight_decay": 0.00001
                  },
                  "scheduler_params": {
                      "base_lr": 0.0001,
                      "max_lr": 0.01,
                      "step_size_up": 2,
                      "cycle_momentum": true
                  }
              }
          }
      },
      "feature_types": [
          "regressor",
          "label_encoded"
      ],
      "runs": [
          "virtual_future"
      ],
      "validation": {
          "train_frac": 0.7,
          "val_frac": 0.15,
          "test_frac": 0.15,
          "valrounds": 1
      },
      "Multivar_list": []
  },
  "training": {
      "Metric": "BINARY",
      "Backprop_loss": "BCELoss",
      "GPU": false,
      "runs": [
          "virtual_future_run"
      ],
      "valrounds": [
          "valround1"
      ],
      "model_names": [
          "MLP"
      ],
      "models": {
          "MLP": {
              "save_model": false,
              "model_weights_fname": "model.pt",
              "explainability": false,
              "min_obj_size": false,
              "feature_groups": [
                  "regressor",
                  "label_encoded"
              ],
              "exclude_cols": [],
              "feature_group_type": {
                  "feature_group_type1": [
                      "regressor",
                      "label_encoded"
                  ]
              },
              "trials": 1,
              "hyperparam_trials": true,
              "random_sample": false,
              "trial_params": [
                  {
                      "optimizer": "RMSprop",
                      "scheduler": "CyclicLR",
                      "SWA": false,
                      "feature_group_type": "feature_group_type1"
                  },
                  {
                      "optimizer": "RMSprop",
                      "scheduler": "CyclicLR",
                      "SWA": false,
                      "feature_group_type": "feature_group_type1"
                  }
              ],
              "default_params": {
                  "optimizer": "RMSprop",
                  "scheduler": "ReduceLROnPlateau",
                  "SWA": true,
                  "feature_group_type": "feature_group_type1"
              },
              "params": {
                  "network_params": {
                      "epochs": 2,
                      "compression_factor": 4,
                      "max_embedding": 16,
                      "dropout": 0.25,
                      "out_features": null
                  },
                  "dataloader_params": {
                      "batch_size": 64,
                      "shuffle": true,
                      "num_workers": 0
                  },
                  "optimizer_params": {
                      "RMSprop": {
                          "lr": 0.001,
                          "alpha": 0.9,
                          "weight_decay": 0.00001
                      },
                      "SGD": {
                          "lr": 0.001,
                          "weight_decay": 0.00001
                      },
                      "Adam": {
                          "lr": 0.001,
                          "weight_decay": 0.00001
                      }
                  },
                  "scheduler_params": {
                      "CyclicLR": {
                          "base_lr": 0.0001,
                          "max_lr": 0.001,
                          "step_size_up": 2,
                          "cycle_momentum": true
                      },
                      "ReduceLROnPlateau": {
                          "mode": "min",
                          "factor": 0.2,
                          "min_lr": 0.000001,
                          "patience": 4
                      }
                  },
                  "SWA_params": {
                      "swa_start": 10,
                      "swa_freq": 5,
                      "swa_lr": 0.001
                  },
                  "callback_params": {
                      "earlystopping": {
                          "patience": 10
                      }
                  },
                  "regularization": {
                      "l2_norm": false,
                      "reg_param": {
                          "reg_loss": null,
                          "lmbda": 0.1
                      }
                  },
                  "parameter_averaging": {
                      "window": 2
                  }
              }
          }
      }
  },
  "scenario_plan": {
      "runs": [
          "virtual_future_run"
      ],
      "model": "MLP",
      "n_groups": null,
      "multiprocessing": true,
      "pre_model_eda": {
          "option": true,
          "Numeric_cuts": 5
      },
      "post_model_customer_distribution": {
          "option": true,
          "deciles": 9
      },
      "engagement_metrics": {
          "option": false
      },
      "scenario_planner": {
          "option": false
      },
      "topn_recommender": 5
  },
  "optimization": {
      "runs": [
          "virtual_future_run"
      ],
      "model": "MLP",
      "n_groups": null,
      "elasticity_cal": {
          "segment_var": "Quantity_sum_lifetime",
          "segment_splits": 3,
          "elasticity_var": "Quantity_sum_lifetime",
          "decile_splits": 3
      },
      "multiprocessing": {
          "f1_opt": true,
          "base_rewards": true
      },
      "total_budget": 100000,
      "elasticity_cap": {
          "min_elasticity": 0.1,
          "max_elasticity": 10
      }
  }
}